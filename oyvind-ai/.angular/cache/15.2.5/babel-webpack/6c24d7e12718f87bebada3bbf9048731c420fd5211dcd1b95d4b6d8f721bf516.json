{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { GalleryComponent } from \"../../ui/gallery/gallery.component\";\nimport { PromptComponent } from \"../../ui/prompt/prompt.component\";\nimport { BehaviorSubject, combineLatest, map, of, switchMap } from 'rxjs';\nimport { WineGeneratorService } from 'src/app/data-access/wine-generator.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction WineGeneratorComponent_div_0_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const vm_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Requesting wines from: \", vm_r1.prompt, \"\");\n  }\n}\nfunction WineGeneratorComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-prompt\", 1);\n    i0.ɵɵlistener(\"prompted\", function WineGeneratorComponent_div_0_Template_app_prompt_prompted_1_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.prompted($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(2, WineGeneratorComponent_div_0_p_2_Template, 2, 1, \"p\", 0);\n    i0.ɵɵelement(3, \"app-gallery\", 2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const vm_r1 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", vm_r1.prompt);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"wines\", vm_r1.wines);\n  }\n}\nexport class WineGeneratorComponent {\n  constructor() {\n    this.wineGenerator = inject(WineGeneratorService);\n    this.prompt$$ = new BehaviorSubject('');\n    this.prompt$ = this.prompt$$.asObservable();\n    this.wines$ = this.prompt$.pipe(switchMap(value => {\n      if (!value) {\n        return of([]);\n      }\n      return this.wineGenerator.getWines(value, 3);\n    }));\n    this.vm$ = combineLatest([this.prompt$, this.wines$]).pipe(map(([prompt, wines]) => ({\n      prompt,\n      wines\n    })));\n  }\n  prompted(value) {\n    this.prompt$$.next(value);\n    console.log(value);\n  }\n}\nWineGeneratorComponent.ɵfac = function WineGeneratorComponent_Factory(t) {\n  return new (t || WineGeneratorComponent)();\n};\nWineGeneratorComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: WineGeneratorComponent,\n  selectors: [[\"app-wine-generator\"]],\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 2,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [3, \"prompted\"], [3, \"wines\"]],\n  template: function WineGeneratorComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, WineGeneratorComponent_div_0_Template, 4, 2, \"div\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.vm$));\n    }\n  },\n  dependencies: [CommonModule, i1.NgIf, i1.AsyncPipe, GalleryComponent, PromptComponent],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"AAAA,SAAoBA,MAAM,QAAQ,eAAe;AACjD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,gBAAgB,QAAQ,oCAAoC;AACrE,SAASC,eAAe,QAAQ,kCAAkC;AAClE,SAASC,eAAe,EAAEC,aAAa,EAAEC,GAAG,EAAEC,EAAE,EAAEC,SAAS,QAAQ,MAAM;AACzE,SAASC,oBAAoB,QAAQ,4CAA4C;;;;;IAS/EC,yBAAqB;IAAAA,YAAsC;IAAAA,iBAAI;;;;IAA1CA,eAAsC;IAAtCA,kEAAsC;;;;;;IAH7DA,2BAA+B;IACjBA;MAAAA;MAAA;MAAA,OAAYA,sCAAgB;IAAA,EAAC;IAACA,iBAAa;IAEvDA,yEAA+D;IAE/DA,iCAA8C;IAEhDA,iBAAM;;;;IAJAA,eAAe;IAAfA,mCAAe;IAENA,eAAkB;IAAlBA,mCAAkB;;;AAQjC,OAAM,MAAOC,sBAAsB;EAjBnCC;IAmBmB,kBAAa,GAAGZ,MAAM,CAACS,oBAAoB,CAAC;IAE5C,aAAQ,GAAG,IAAIL,eAAe,CAAS,EAAE,CAAC;IAC1C,YAAO,GAAG,IAAI,CAACS,QAAQ,CAACC,YAAY,EAAE;IAEtC,WAAM,GAAG,IAAI,CAACC,OAAO,CAACC,IAAI,CACzCR,SAAS,CAAES,KAAK,IAAI;MAClB,IAAI,CAACA,KAAK,EAAE;QACV,OAAOV,EAAE,CAAE,EAAE,CAAC;;MAGhB,OAAO,IAAI,CAACW,aAAa,CAACC,QAAQ,CAACF,KAAK,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CACH;IAEe,QAAG,GAAGZ,aAAa,CAAC,CAAC,IAAI,CAACU,OAAO,EAAE,IAAI,CAACK,MAAM,CAAC,CAAC,CAC/DJ,IAAI,CAACV,GAAG,CAAC,CAAC,CAACe,MAAM,EAAEC,KAAK,CAAC,MAAM;MAC7BD,MAAM;MACNC;KACF,CAAC,CAAC,CAAC;;EAEGC,QAAQ,CAACN,KAAa;IAC3B,IAAI,CAACJ,QAAQ,CAACW,IAAI,CAACP,KAAK,CAAC;IACzBQ,OAAO,CAACC,GAAG,CAACT,KAAK,CAAC;EACpB;;AA1BWN,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;QAAtBA,sBAAsB;EAAAgB;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MAbnCvB,uEAOM;;;;MAPAA,oDAAkB;;;iBAUZT,YAAY,yBAAEC,gBAAgB,EAAEC,eAAe;EAAA+B;AAAA","names":["inject","CommonModule","GalleryComponent","PromptComponent","BehaviorSubject","combineLatest","map","of","switchMap","WineGeneratorService","i0","WineGeneratorComponent","constructor","prompt$$","asObservable","prompt$","pipe","value","wineGenerator","getWines","wines$","prompt","wines","prompted","next","console","log","selectors","standalone","features","decls","vars","consts","template","encapsulation"],"sourceRoot":"","sources":["C:\\Programmering\\webpage\\oyvind-ai\\src\\app\\components\\smart\\wine-generator\\wine-generator.component.ts"],"sourcesContent":["import { Component, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { GalleryComponent } from \"../../ui/gallery/gallery.component\";\nimport { PromptComponent } from \"../../ui/prompt/prompt.component\";\nimport { BehaviorSubject, combineLatest, map, of, switchMap } from 'rxjs';\nimport { WineGeneratorService } from 'src/app/data-access/wine-generator.service';\n\n@Component({\n  selector: 'app-wine-generator',\n  standalone: true,\n  template: `\n<div *ngIf=\"vm$ | async as vm\">\n  <app-prompt (prompted)=\"prompted($event)\"></app-prompt>\n\n  <p *ngIf=\"vm.prompt\">Requesting wines from: {{ vm.prompt }}</p>\n\n  <app-gallery [wines]=\"vm.wines\"></app-gallery>\n\n</div>\n`,\n  styles: [],\n  imports: [CommonModule, GalleryComponent, PromptComponent]\n})\n\nexport class WineGeneratorComponent {\n\n  private readonly wineGenerator = inject(WineGeneratorService)\n\n  private readonly prompt$$ = new BehaviorSubject<string>('');\n  private readonly prompt$ = this.prompt$$.asObservable();\n\n  private readonly wines$ = this.prompt$.pipe(\n    switchMap((value) => {\n      if (!value) {\n        return of ([]);\n      }\n      \n      return this.wineGenerator.getWines(value, 3);\n    })\n  );\n\n  public readonly vm$ = combineLatest([this.prompt$, this.wines$])\n  .pipe(map(([prompt, wines]) => ({\n     prompt,\n     wines\n  })));\n\n  public prompted(value: string): void {\n    this.prompt$$.next(value);\n    console.log(value);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}