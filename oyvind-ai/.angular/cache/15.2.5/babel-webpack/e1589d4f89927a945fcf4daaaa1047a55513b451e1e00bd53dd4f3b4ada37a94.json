{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { GalleryComponent } from \"../../ui/gallery/gallery.component\";\nimport { PromptComponent } from \"../../ui/prompt/prompt.component\";\nimport { BehaviorSubject, combineLatest, map, of, switchMap } from 'rxjs';\nimport { WineGeneratorService } from 'src/app/data-access/wine-generator.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction WineGeneratorComponent_div_0_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const vm_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Requesting wines from: \", vm_r1.prompt, \"\");\n  }\n}\nfunction WineGeneratorComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"app-prompt\", 2);\n    i0.ɵɵlistener(\"prompted\", function WineGeneratorComponent_div_0_Template_app_prompt_prompted_1_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.prompted($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(2, WineGeneratorComponent_div_0_p_2_Template, 2, 1, \"p\", 3);\n    i0.ɵɵelement(3, \"app-gallery\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const vm_r1 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", vm_r1.prompt);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"wines\", vm_r1.wines);\n  }\n}\nexport class WineGeneratorComponent {\n  constructor() {\n    this.wineGenerator = inject(WineGeneratorService);\n    this.prompt$$ = new BehaviorSubject('');\n    this.prompt$ = this.prompt$$.asObservable();\n    this.wines$ = this.prompt$.pipe(switchMap(value => {\n      if (!value) {\n        return of([]);\n      }\n      return this.wineGenerator.getWines(value, 3);\n    }));\n    this.vm$ = combineLatest([this.prompt$, this.wines$]).pipe(map(([prompt, wines]) => ({\n      prompt,\n      wines\n    })));\n  }\n  prompted(value) {\n    this.prompt$$.next(value);\n    console.log(value);\n  }\n}\nWineGeneratorComponent.ɵfac = function WineGeneratorComponent_Factory(t) {\n  return new (t || WineGeneratorComponent)();\n};\nWineGeneratorComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: WineGeneratorComponent,\n  selectors: [[\"app-wine-generator\"]],\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 2,\n  vars: 3,\n  consts: [[\"class\", \"container\", 4, \"ngIf\"], [1, \"container\"], [3, \"prompted\"], [\"class\", \"mt-4 text-xl text-center\", 4, \"ngIf\"], [3, \"wines\"], [1, \"mt-4\", \"text-xl\", \"text-center\"]],\n  template: function WineGeneratorComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, WineGeneratorComponent_div_0_Template, 4, 2, \"div\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.vm$));\n    }\n  },\n  dependencies: [CommonModule, i1.NgIf, i1.AsyncPipe, GalleryComponent, PromptComponent],\n  styles: [\".container[_ngcontent-%COMP%] {\\n  max-width: 800px;\\n  margin-left: auto;\\n  margin-right: auto;\\n  padding-left: 1rem;\\n  padding-right: 1rem;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9zbWFydC93aW5lLWdlbmVyYXRvci93aW5lLWdlbmVyYXRvci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ007RUFDRSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0FBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgIC5jb250YWluZXIge1xuICAgICAgICBtYXgtd2lkdGg6IDgwMHB4O1xuICAgICAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICAgICAgICBwYWRkaW5nLWxlZnQ6IDFyZW07XG4gICAgICAgIHBhZGRpbmctcmlnaHQ6IDFyZW07XG4gICAgICB9XG5cbiAgICAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AAAA,SAAoBA,MAAM,QAAQ,eAAe;AACjD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,gBAAgB,QAAQ,oCAAoC;AACrE,SAASC,eAAe,QAAQ,kCAAkC;AAClE,SAASC,eAAe,EAAEC,aAAa,EAAEC,GAAG,EAAEC,EAAE,EAAEC,SAAS,QAAQ,MAAM;AACzE,SAASC,oBAAoB,QAAQ,4CAA4C;;;;;IAS3EC,4BAAsD;IAAAA,YAAsC;IAAAA,iBAAI;;;;IAA1CA,eAAsC;IAAtCA,kEAAsC;;;;;;IAH9FA,8BAAiD;IACnCA;MAAAA;MAAA;MAAA,OAAYA,sCAAgB;IAAA,EAAC;IAACA,iBAAa;IAEvDA,yEAAgG;IAEhGA,iCAA8C;IAChDA,iBAAM;;;;IAHAA,eAAe;IAAfA,mCAAe;IAENA,eAAkB;IAAlBA,mCAAkB;;;AAiBrC,OAAM,MAAOC,sBAAsB;EA1BnCC;IA2BmB,kBAAa,GAAGZ,MAAM,CAACS,oBAAoB,CAAC;IAE5C,aAAQ,GAAG,IAAIL,eAAe,CAAS,EAAE,CAAC;IAC1C,YAAO,GAAG,IAAI,CAACS,QAAQ,CAACC,YAAY,EAAE;IAEtC,WAAM,GAAG,IAAI,CAACC,OAAO,CAACC,IAAI,CACzCR,SAAS,CAAES,KAAK,IAAI;MAClB,IAAI,CAACA,KAAK,EAAE;QACV,OAAOV,EAAE,CAAC,EAAE,CAAC;;MAGf,OAAO,IAAI,CAACW,aAAa,CAACC,QAAQ,CAACF,KAAK,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CACH;IAEe,QAAG,GAAGZ,aAAa,CAAC,CAAC,IAAI,CAACU,OAAO,EAAE,IAAI,CAACK,MAAM,CAAC,CAAC,CAACJ,IAAI,CACnEV,GAAG,CAAC,CAAC,CAACe,MAAM,EAAEC,KAAK,CAAC,MAAM;MACxBD,MAAM;MACNC;KACD,CAAC,CAAC,CACJ;;EAEMC,QAAQ,CAACN,KAAa;IAC3B,IAAI,CAACJ,QAAQ,CAACW,IAAI,CAACP,KAAK,CAAC;IACzBQ,OAAO,CAACC,GAAG,CAACT,KAAK,CAAC;EACpB;;AA1BWN,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;QAAtBA,sBAAsB;EAAAgB;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MAtB/BvB,uEAMM;;;;MANAA,oDAAkB;;;iBAoBhBT,YAAY,yBAAEC,gBAAgB,EAAEC,eAAe;EAAA+B;AAAA","names":["inject","CommonModule","GalleryComponent","PromptComponent","BehaviorSubject","combineLatest","map","of","switchMap","WineGeneratorService","i0","WineGeneratorComponent","constructor","prompt$$","asObservable","prompt$","pipe","value","wineGenerator","getWines","wines$","prompt","wines","prompted","next","console","log","selectors","standalone","features","decls","vars","consts","template","styles"],"sourceRoot":"","sources":["C:\\Programmering\\webpage\\oyvind-ai\\src\\app\\components\\smart\\wine-generator\\wine-generator.component.ts"],"sourcesContent":["import { Component, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { GalleryComponent } from \"../../ui/gallery/gallery.component\";\nimport { PromptComponent } from \"../../ui/prompt/prompt.component\";\nimport { BehaviorSubject, combineLatest, map, of, switchMap } from 'rxjs';\nimport { WineGeneratorService } from 'src/app/data-access/wine-generator.service';\n\n@Component({\n  selector: 'app-wine-generator',\n  standalone: true,\n  template: `\n    <div *ngIf=\"vm$ | async as vm\" class=\"container\">\n      <app-prompt (prompted)=\"prompted($event)\"></app-prompt>\n\n      <p *ngIf=\"vm.prompt\" class=\"mt-4 text-xl text-center\">Requesting wines from: {{ vm.prompt }}</p>\n\n      <app-gallery [wines]=\"vm.wines\"></app-gallery>\n    </div>\n  `,\n  styles: [\n    `\n      .container {\n        max-width: 800px;\n        margin-left: auto;\n        margin-right: auto;\n        padding-left: 1rem;\n        padding-right: 1rem;\n      }\n\n    `,\n  ],\n  imports: [CommonModule, GalleryComponent, PromptComponent],\n})\nexport class WineGeneratorComponent {\n  private readonly wineGenerator = inject(WineGeneratorService);\n\n  private readonly prompt$$ = new BehaviorSubject<string>('');\n  private readonly prompt$ = this.prompt$$.asObservable();\n\n  private readonly wines$ = this.prompt$.pipe(\n    switchMap((value) => {\n      if (!value) {\n        return of([]);\n      }\n\n      return this.wineGenerator.getWines(value, 3);\n    })\n  );\n\n  public readonly vm$ = combineLatest([this.prompt$, this.wines$]).pipe(\n    map(([prompt, wines]) => ({\n      prompt,\n      wines,\n    }))\n  );\n\n  public prompted(value: string): void {\n    this.prompt$$.next(value);\n    console.log(value);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}